# labpubs.yaml -- Example configuration

lab:
  name: "Computational Social Science Lab"
  institution: "University of Washington"

# Email for OpenAlex polite pool (strongly recommended)
openalex_email: "labpubs@example.edu"

# Optional: Semantic Scholar API key for higher rate limits
semantic_scholar_api_key: null

# Where to store the SQLite database
database_path: "~/.labpubs/labpubs.db"

# Researchers to track
# Each researcher can have optional start_date/end_date (ISO format)
# and belong to one or more groups.
# If end_date is omitted, the researcher is considered still active.
researchers:
  - name: "Jane Doe"
    openalex_id: "A5023888391"
    semantic_scholar_id: "1741101"
    orcid: "0000-0002-1234-5678"
    start_date: "2020-09-01"
    groups:
      - faculty
      - NLP

  - name: "John Smith"
    openalex_id: "A5012345678"
    start_date: "2019-09-01"
    end_date: "2023-06-30"
    groups:
      - IR

  # If you only have a name, run `labpubs setup` to resolve IDs
  - name: "Alice Johnson"
    affiliation: "University of Washington"
    start_date: "2024-01-15"
    groups:
      - PhD students

# Sources to query (order = priority for metadata conflicts)
sources:
  - openalex
  - semantic_scholar
  - crossref

# Notification settings (all optional)
notifications:
  slack:
    webhook_url: "https://hooks.slack.com/services/T.../B.../..."
    channel: "#lab-papers"
  # email:
  #   smtp_host: "smtp.example.edu"
  #   smtp_port: 587
  #   from_address: "labpubs@example.edu"
  #   to_addresses:
  #     - "lab-list@example.edu"

# Google Scholar alert email ingestion (optional)
# Connects to your Gmail via IMAP and parses Scholar alert emails
# into publications. Requires a Gmail App Password.
# See README for full setup instructions.
scholar_alerts:
  enabled: false
  imap_server: "imap.gmail.com"
  mailbox: "INBOX"

  # Search criteria for finding Scholar alert emails
  search:
    from_addr: "scholaralerts-noreply@google.com"
    subject_contains: "new articles"
    unseen_only: true

  # IMAP credentials (read from environment variables)
  auth:
    username_env: "SCHOLAR_EMAIL"       # env var containing your Gmail address
    app_password_env: "SCHOLAR_PASSWORD" # env var containing your App Password

  # Map Scholar alerts to tracked researchers
  # Each entry links an alert email to a researcher in the list above.
  # Use scholar_profile_user (the "user=" ID from Google Scholar URLs)
  # or alert_subject_prefix (text that appears in the email subject).
  researcher_map:
    - researcher_name: "Jane Doe"
      scholar_profile_user: "abc123XYZ"    # from scholar.google.com/citations?user=abc123XYZ
    - researcher_name: "John Smith"
      alert_subject_prefix: "John Smith"   # matches subject "new articles for John Smith"

# Export settings
exports:
  bibtex_path: "~/lab-publications.bib"
  json_path: "~/lab-publications.json"
